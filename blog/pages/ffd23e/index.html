<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端构建这十年 | 大石头</title>
    <meta name="generator" content="VuePress 1.9.7">
    <!-- <link rel="stylesheet" href="https://cdn.staticfile.org/element-ui/2.15.9/theme-chalk/index.min.css"> -->
    <link rel="shortcut icon" href="/blog/local/images/favicon.ico">
    <meta name="description" content="网站的描述">
    
    <link rel="preload" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/css/0.styles.0df9beb6.css" as="style"><link rel="preload" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/app.77b6dd1c.js" as="script"><link rel="preload" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/2.1180b6b0.js" as="script"><link rel="preload" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/3.3207771c.js" as="script"><link rel="preload" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/293.623bd08c.js" as="script"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/10.14cc1aae.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/100.360cd76d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/101.f25b13c8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/102.0e612af1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/103.6027cba6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/104.3dd9206f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/105.582c1aab.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/106.830ea7de.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/107.935fbb3d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/108.fa2179c3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/109.76500a89.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/11.6a6c3684.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/110.8071d235.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/111.52c4ffd1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/112.022223cb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/113.0015c45b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/114.c6ae58e1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/115.fad04f2e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/116.40b27941.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/117.b7352190.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/118.43694895.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/119.10de8b56.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/12.d0d64d8b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/120.f97482df.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/121.bef2a673.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/122.adb4b75f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/123.48da2239.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/124.c354f5e0.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/125.cf9e7ae7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/126.77f5e426.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/127.3ffb607f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/128.bd583b22.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/129.5dd538d6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/13.8ef1eb96.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/130.4b86b087.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/131.8ac4dc0b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/132.659a1109.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/133.7bfec0bb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/134.c233ebc9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/135.0b2123ee.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/136.685b8521.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/137.5dc007f9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/138.37fc0480.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/139.bad7c7b8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/14.c85141d2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/140.f2ace508.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/141.f065cc92.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/142.840bf0d8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/143.e343a523.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/144.af487558.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/145.602c4eb9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/146.933c3551.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/147.1377c453.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/148.f2040f34.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/149.0b01b301.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/15.40c8839c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/150.759fb78f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/151.0348e3d5.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/152.a0d951b6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/153.b519692a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/154.e05ad36e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/155.18b63edd.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/156.7460b633.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/157.57948761.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/158.d6feb8a0.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/159.d70002d1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/16.7bc443d2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/160.34faf605.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/161.471e3a14.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/162.7e93bd2b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/163.d64b2744.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/164.b6223818.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/165.f7292113.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/166.9e851ccf.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/167.50c340bd.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/168.528dd824.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/169.39edc2a3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/17.0652ccf4.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/170.e7f17569.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/171.f8f8890b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/172.332debfb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/173.725a473b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/174.81fe1cc4.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/175.10bec886.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/176.b050299b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/177.b615769c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/178.52e110f8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/179.93fa312f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/18.e7201d8e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/180.645d50db.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/181.6431934a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/182.e431f4f5.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/183.ca72cfc2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/184.4bfcf9f1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/185.5f62296d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/186.b76d3b26.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/187.7608fdeb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/188.6ef11c3f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/189.d33bcbfe.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/19.9ed35fe3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/190.113713b7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/191.368c521f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/192.d963e872.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/193.5ca46042.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/194.b2d94ca5.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/195.1b05cf61.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/196.e8b3a7c6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/197.bd07f328.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/198.ca0fe31d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/199.2db78814.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/20.015331a8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/200.3a4e6ec6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/201.66fbec4e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/202.4dc687a6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/203.fc0efe80.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/204.71c4797d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/205.77779acb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/206.59a4fca1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/207.df7aa42b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/208.89e5ca09.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/209.11a32ad3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/21.880d4846.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/210.1fa65a75.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/211.077df495.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/212.6ebc28b0.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/213.2c8d8f1c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/214.ed38ddb6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/215.5f245e2c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/216.8def5566.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/217.935ed1f6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/218.6d1b1989.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/219.bfbbb344.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/22.695fb8e1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/220.7f1c342b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/221.6aafb260.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/222.2d423b0c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/223.2562ff37.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/224.2c81e093.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/225.6d22185b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/226.8ad067d9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/227.8970debc.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/228.e5a42667.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/229.bf46cdac.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/23.18a5d789.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/230.35426c2d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/231.0f4fcd0c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/232.ed0b4678.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/233.5c79de37.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/234.d65d3644.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/235.be7b0638.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/236.88cfc616.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/237.8c79e6b3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/238.c45d20b7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/239.0bf751b3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/24.98ad486e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/240.f55b86bb.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/241.9a928106.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/242.430347d7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/243.6d798028.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/244.294ba579.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/245.f2e99234.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/246.624a3c3a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/247.87c1e55a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/248.b004f21c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/249.6022220f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/25.6a310bed.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/250.cbbe60c5.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/251.7da475ae.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/252.e1b63a55.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/253.35436959.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/254.1e0e0b77.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/255.2078f779.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/256.d2feb560.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/257.d4c2c0c1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/258.b56b2675.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/259.bfd8a230.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/26.78320819.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/260.780decc2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/261.b5b30a66.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/262.5a3b47e9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/263.4a121599.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/264.d084a65d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/265.8bc15878.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/266.fc066df2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/267.0d671d42.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/268.ecb77302.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/269.1f08594d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/27.060ca9c1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/270.ef6fc98e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/271.07ee32fc.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/272.aafd9ff1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/273.b5a22e42.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/274.7c267421.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/275.d1dd015a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/276.2a83568b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/277.bc8ebe31.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/278.c5f0fb03.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/279.476dfc72.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/28.0bd75441.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/280.db0c6868.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/281.a463ba39.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/282.f98a73c3.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/283.0708941e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/284.c3784c1b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/285.75c115a1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/286.7aaca30f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/287.122a7656.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/288.e6b15bed.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/289.d6eaa61c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/29.edd1665b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/290.15528c70.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/291.47da18dd.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/292.24120512.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/30.e3a957ea.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/31.ebea2ac1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/32.34d1b23e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/33.7c005508.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/34.24d2d51f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/35.2e183046.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/36.3de937b2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/37.2ead4207.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/38.8725e408.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/39.e1882a58.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/4.b6713ef0.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/40.10880c5e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/41.5eb501a9.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/42.c6cf8d4f.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/43.ab19927c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/44.212d2868.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/45.d56b862c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/46.c2bd9239.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/47.8b4b07f8.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/48.905f757b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/49.784fff0a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/5.1189d482.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/50.72a27276.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/51.8d4625b0.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/52.3ecf665d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/53.074684df.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/54.e618d76e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/55.47d7d5bf.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/56.f1c3fd81.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/57.35f21321.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/58.e882ff60.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/59.38329a19.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/6.d8137075.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/60.61b89d70.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/61.c74ecf29.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/62.1cae5b0b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/63.b94ba522.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/64.758a4a61.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/65.180a57b7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/66.e51ad9df.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/67.051e5622.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/68.07aa4676.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/69.1904e366.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/7.65453a92.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/70.6b98cf0b.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/71.63b91243.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/72.d0d24fe6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/73.cb62536d.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/74.3b95bde2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/75.574c60fe.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/76.97fc5323.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/77.453c111e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/78.1184eb22.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/79.54316f48.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/8.b602ce00.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/80.0cbab4b6.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/81.d15de89a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/82.625311c1.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/83.82c20fad.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/84.6e266266.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/85.18afebbe.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/86.c4386c6a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/87.fc13ad30.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/88.c6fd64b2.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/89.85abb2f5.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/9.d670452e.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/90.d03b5347.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/91.52aa62c7.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/92.ae7fee5a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/93.8303868a.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/94.47dc0b93.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/95.6463602c.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/96.9b4cbc60.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/97.f4525fdd.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/98.1a2612c4.js"><link rel="prefetch" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/99.2fcc6ecf.js">
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/css/0.styles.0df9beb6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/local/images/logo.png" alt="大石头" class="logo"> <span class="site-name can-hide">大石头</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/blog/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/e515ef/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/d5d654/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/13753f/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/3355f7/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/bc99e2/" class="nav-link">Web API</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/blog/advanced/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/cd2bf6/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/7468c4/" class="nav-link">NodeJS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/blog/cst/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/986dd9/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/f05e52/" class="nav-link">排序算法</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/401e85/" class="nav-link">网络基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><a href="/blog/universal/" class="link-title">通用技能</a> <span class="title" style="display:none;">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/b3cd00/" class="nav-link">编码实践</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/121734/" class="nav-link">版本管理(Git)</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/c71511/" class="nav-link">版本管理(Svn)</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/302464/" class="nav-link">Markdown</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章索引" class="dropdown-title"><a href="/blog/categories/" class="link-title">文章索引</a> <span class="title" style="display:none;">文章索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/songlitao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><a href="/blog/web/" class="link-title">前端基础</a> <span class="title" style="display:none;">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/e515ef/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/d5d654/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/13753f/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/3355f7/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/bc99e2/" class="nav-link">Web API</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><a href="/blog/advanced/" class="link-title">前端进阶</a> <span class="title" style="display:none;">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/cd2bf6/" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/7468c4/" class="nav-link">NodeJS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><a href="/blog/cst/" class="link-title">计算机基础</a> <span class="title" style="display:none;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/986dd9/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/f05e52/" class="nav-link">排序算法</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/401e85/" class="nav-link">网络基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="通用技能" class="dropdown-title"><a href="/blog/universal/" class="link-title">通用技能</a> <span class="title" style="display:none;">通用技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/b3cd00/" class="nav-link">编码实践</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/121734/" class="nav-link">版本管理(Git)</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/c71511/" class="nav-link">版本管理(Svn)</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/302464/" class="nav-link">Markdown</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章索引" class="dropdown-title"><a href="/blog/categories/" class="link-title">文章索引</a> <span class="title" style="display:none;">文章索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/songlitao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p title="前端构建这十年" class="sidebar-heading open"><span>前端构建这十年</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/ffd23e/#写在前面" title="写在前面" class="sidebar-link">写在前面</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/pages/ffd23e/#基于浏览器的模块化" title="基于浏览器的模块化" class="sidebar-link">基于浏览器的模块化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#commonjs" title="CommonJS" class="sidebar-link">CommonJS</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#requirejs-和-amd" title="RequireJs 和 AMD" class="sidebar-link">RequireJs 和 AMD</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#sea-js-和-cmd" title="Sea.js 和 CMD" class="sidebar-link">Sea.js 和 CMD</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#小结" title="小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/blog/pages/ffd23e/#bundle-类的构建工具" title="bundle 类的构建工具" class="sidebar-link">bundle 类的构建工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#grunt" title="Grunt" class="sidebar-link">Grunt</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#browserify" title="browserify" class="sidebar-link">browserify</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#umd" title="UMD" class="sidebar-link">UMD</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#gulp" title="Gulp" class="sidebar-link">Gulp</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#webpack" title="webpack" class="sidebar-link">webpack</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#rollup" title="rollup" class="sidebar-link">rollup</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#tree-shaking" title="Tree-shaking" class="sidebar-link">Tree-shaking</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#parcel" title="parcel" class="sidebar-link">parcel</a></li></ul></li><li><a href="/blog/pages/ffd23e/#基于浏览器-es-模块的构建工具" title="基于浏览器 ES 模块的构建工具" class="sidebar-link">基于浏览器 ES 模块的构建工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/ffd23e/#snowpack-和-vite" title="snowpack 和 vite" class="sidebar-link">snowpack 和 vite</a></li></ul></li><li><a href="/blog/pages/ffd23e/#总结" title="总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><!----> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/songlitao" target="_blank" title="作者" class="beLink" data-v-06970110>大石头</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2022-04-30</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-06970110><a href="/blog/categories/?category=%E9%9A%8F%E7%AC%94" data-v-06970110>随笔 </a></div></div></div></div> <!----> <div class="content-wrapper"><!----> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">前端构建这十年<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h2> <p>前端模块化/构建工具从最开始的基于浏览器<strong>运行时</strong>加载的 <code>RequireJs/Sea.js</code> 到将所有资源组装依赖打包 <code>webpack</code>/<code>rollup</code>/<code>parcel</code>的<code>bundle</code>类模块化构建工具，再到现在的<code>bundleless</code>基于浏览器原生 ES 模块的 <code>snowpack</code>/<code>vite</code>，前端的模块化/构建工具发展到现在已经快 10 年了。</p> <p>本文主要回顾 10 年间，前端模块化/构建工具的发展历程及其实现原理。</p> <p>看完本文你可以学到以下知识：</p> <ul><li>模块化规范方案</li> <li>前端构建工具演变，对前端构建有一个系统性认识</li> <li>各个工具诞生历程及所解决的问题</li> <li>webpack/parcel/vite 的构建流程及原理分析</li></ul> <p>（因涉及一些历史、趋势，本文观点仅代表个人主观看法）</p> <h2 id="基于浏览器的模块化"><a href="#基于浏览器的模块化" class="header-anchor">#</a> 基于浏览器的模块化</h2> <h3 id="commonjs"><a href="#commonjs" class="header-anchor">#</a> CommonJS</h3> <p>一切的开始要从<a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/CommonJS" target="_blank" rel="noopener noreferrer">CommonJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>规范说起。</p> <p><code>CommonJS</code> 本来叫<a href="https://link.zhihu.com/?target=https%3A//www.blueskyonmars.com/2009/01/29/what-server-side-javascript-needs/" target="_blank" rel="noopener noreferrer">ServerJs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，其目标本来是为<strong>浏览器之外</strong>的<code>javascript</code>代码制定规范，在那时<code>NodeJs</code>还没有出生，有一些零散的应用于服务端的<code>JavaScript</code>代码，但是没有完整的生态。</p> <p>之后就是 <code>NodeJs</code> 从 <code>CommonJS</code> 社区的规范中吸取经验创建了本身的模块系统。</p> <h3 id="requirejs-和-amd"><a href="#requirejs-和-amd" class="header-anchor">#</a> RequireJs 和 AMD</h3> <p><code>CommonJs</code> 是一套同步模块导入规范，但是在浏览器上还没法实现同步加载，这一套规范在浏览器上明显行不通，所以基于浏览器的异步模块 <code>AMD</code>(<a href="https://link.zhihu.com/?target=http%3A//wiki.commonjs.org/wiki/Modules/AsynchronousDefinition" target="_blank" rel="noopener noreferrer">Asynchronous Module Definition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)规范诞生。</p> <div class="language- extra-class"><pre class="language-text"><code>define(id?, dependencies?, factory);
define(&quot;alpha&quot;, [&quot;require&quot;, &quot;exports&quot;, &quot;beta&quot;], function (
  require,
  exports,
  beta
) {
  exports.verb = function () {
    return beta.verb();
    //Or:
    return require(&quot;beta&quot;).verb();
  };
});
</code></pre></div><p><code>AMD</code>规范采用<strong>依赖前置</strong>，先把需要用到的依赖提前写在 <code>dependencies</code> 数组里，在所有依赖下载完成后再调用<code>factory</code>回调，通过传参来获取模块，同时也支持<code>require(&quot;beta&quot;)</code>的方式来获取模块，但实际上这个<code>require</code>只是语法糖，模块并非在<code>require</code>的时候导入，而是跟前面说的一样在调用<code>factory</code>回调之前就被执行，关于依赖前置和执行时机这点在当时有很大的争议，被 <code>CommonJs</code>社区所不容。</p> <p>在当时浏览器上应用<code>CommonJs</code>还有另外一个流派 <code>module/2.0</code>， 其中有<code>BravoJS</code>的 Modules/2.0-draft 规范和 <code>FlyScript</code>的 <a href="https://link.zhihu.com/?target=http%3A//wiki.commonjs.org/wiki/Modules/Wrappings" target="_blank" rel="noopener noreferrer">Modules/Wrappings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>规范。</p> <p>代码实现大致如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function">declare</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  exports<span class="token punctuation">.</span>foo <span class="token operator">=</span> a<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>奈何<code>RequireJs</code>如日中天，根本争不过。</p> <p>关于这段的内容可以看玉伯的 <a href="https://link.zhihu.com/?target=https%3A//github.com/seajs/seajs/issues/588" target="_blank" rel="noopener noreferrer">前端模块化开发那点历史<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="sea-js-和-cmd"><a href="#sea-js-和-cmd" class="header-anchor">#</a> Sea.js 和 CMD</h3> <p>在不断给 <code>RequireJs</code> 提建议，但不断不被采纳后，玉伯结合<code>RequireJs</code>和<code>module/2.0</code>规范写出了基于 CMD（<a href="https://link.zhihu.com/?target=https%3A//github.com/cmdjs/specification/blob/master/draft/module.md" target="_blank" rel="noopener noreferrer">Common Module Definition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）规范的<code>Sea.js</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>define(factory);
define(function (require, exports, module) {
  var add = require(&quot;math&quot;).add;
  exports.increment = function (val) {
    return add(val, 1);
  };
});
</code></pre></div><p>在 CMD 规范中，一个模块就是一个文件。模块只有在被<code>require</code>才会被执行。 相比于 AMD 规范，CMD 更加简洁，而且也更加易于兼容 <code>CommonJS</code> 和 <code>Node.js</code> 的 <code>Modules</code> 规范。</p> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p><code>RequireJs</code>和<code>Sea.js</code>都是利用动态创建<code>script</code>来异步加载 js 模块的。</p> <p>在作者还是前端小白使用这两个库的时候就很好奇它是怎么在函数调用之前就获取到其中的依赖的，后来看了源码后恍然大悟，没想到就是简单的函数 <code>toString</code> 方法</p> <p><img alt="img" data-src="https://pic4.zhimg.com/80/v2-6afc5fa56423f0e5807cf93d6a243c3b_720w.jpg" loading="lazy" class="lazy"></p> <p>通过对<code>factory</code>回调<code>toString</code>拿到函数的代码字符串，然后通过正则匹配获取<code>require</code>函数里面的字符串依赖</p> <p>这也是为什么二者都不允许<code>require</code>更换名称或者变量赋值，也不允许依赖字符串使用变量，只能使用字符串字面量的原因</p> <p>规范之争在当时还是相当混乱的，先有<code>CommonJs</code>社区，然后有了 AMD/CMD 规范和 <code>NodeJs</code> 的 <code>module</code> 规范，但是当那些<code>CommonJs</code>的实现库逐渐没落，并随着<code>NodeJs</code>越来越火，我们口中所说的<code>CommonJs</code> 好像就只有 <code>NodeJs</code>所代表的<code>modules</code>了。</p> <h2 id="bundle-类的构建工具"><a href="#bundle-类的构建工具" class="header-anchor">#</a> bundle 类的构建工具</h2> <h3 id="grunt"><a href="#grunt" class="header-anchor">#</a> Grunt</h3> <p>随着<code>NodeJs</code>的逐渐流行，基于<code>NodeJs</code>的自动化构建工具<code>Grunt</code>诞生</p> <p><code>Grunt</code>可以帮我们自动化处理需要反复重复的任务，例如压缩（minification）、编译、单元测试、linting 等，还有强大的插件生态。</p> <p><code>Grunt</code>采用配置化的思想：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Project configuration.</span>
  grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pkg</span><span class="token operator">:</span> grunt<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">readJSON</span><span class="token punctuation">(</span><span class="token string">&quot;package.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">uglify</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">banner</span><span class="token operator">:</span>
          <span class="token string">'/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;yyyy-mm-dd&quot;) %&gt; */\n'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&quot;src/&lt;%= pkg.name %&gt;.js&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">dest</span><span class="token operator">:</span> <span class="token string">&quot;build/&lt;%= pkg.name %&gt;.min.js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 加载包含 &quot;uglify&quot; 任务的插件。</span>
  grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">&quot;grunt-contrib-uglify&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 默认被执行的任务列表。</span>
  grunt<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;uglify&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>基于 <code>nodejs</code> 的一系列自动化工具的出现，也标志着前端进入了新的时代。</p> <h3 id="browserify"><a href="#browserify" class="header-anchor">#</a> browserify</h3> <p><code>browserify</code>致力于在浏览器端使用<code>CommonJs</code>，他使用跟 <code>NodeJs</code> 一样的模块化语法，然后将所有依赖文件编译到一个<code>bundle</code>文件，在浏览器通过<code>&lt;script&gt;</code>标签使用的，并且支持 npm 库。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./foo.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gamma <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gamma&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;result&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elem<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">gamma</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
$ browserify main<span class="token punctuation">.</span>js <span class="token operator">&gt;</span> bundle<span class="token punctuation">.</span>js
</code></pre></div><p>当时<code>RequireJs(r.js)</code>虽然也有了 node 端的 api 可以编译<code>AMD</code>语法输出到单个文件，但主流的还是使用浏览器端的<code>RequireJs</code>。</p> <p>AMD / RequireJS：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./thing1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./thing2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./thing3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
  <span class="token parameter">thing1<span class="token punctuation">,</span>
  thing2<span class="token punctuation">,</span>
  thing3</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 告诉模块返回/导出什么</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing1<span class="token punctuation">,</span> thing2<span class="token punctuation">,</span> thing3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>CommonJS：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> thing1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./thing1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> thing2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./thing2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> thing3 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./thing3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 告诉模块返回/导出什么</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>thing1<span class="token punctuation">,</span> thing2<span class="token punctuation">,</span> thing3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>相比于 AMD 规范为浏览器做出的妥协，在服务端的预编译方面<code>CommonJs</code>的语法更加友好。</p> <p>常用的搭配就是 <code>browserify</code> + <code>Grunt</code>，使用<code>Grunt</code>的<code>browserify</code>插件来构建模块化代码，并对代码进行压缩转换等处理。</p> <h3 id="umd"><a href="#umd" class="header-anchor">#</a> UMD</h3> <p>现在有了<code>RequireJs</code>，也有了<code>browserify</code>但是这两个用的是不同的模块化规范，所以有了 UMD - 通用模块规范，UMD 规范就是为了兼容<code>AMD</code>和<code>CommonJS</code>规范。就是以下这坨东西：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd
    <span class="token operator">?</span> <span class="token function">define</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">(</span>global<span class="token punctuation">.</span>libName <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gulp"><a href="#gulp" class="header-anchor">#</a> Gulp</h3> <p>上面说到<code>Grunt</code>是基于配置的，配置化的上手难度较高，需要了解每个配置的参数，当配置复杂度上升的时候，代码看起来比较混乱。 <code>gulp</code> 基于代码配置和对 <code>Node.js</code> 流的应用使得构建更简单、更直观。可以配置更加复杂的任务。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> browserify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;browserify&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> source <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vinyl-source-stream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> buffer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;vinyl-buffer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-uglify&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp-size&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;gulp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">&quot;build&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> bundler <span class="token operator">=</span> <span class="token function">browserify</span><span class="token punctuation">(</span><span class="token string">&quot;./index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> bundler
    <span class="token punctuation">.</span><span class="token function">bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token string">&quot;index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上是一个配置<code>browserify</code>的例子，可以看出来非常简洁直观。</p> <h3 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h3> <p>在说<code>webpack</code>之前，先放一下阮一峰老师的吐槽</p> <p><img alt="img" data-src="https://pic2.zhimg.com/80/v2-7635e511a2fd00b2b31301652038705d_720w.jpg" loading="lazy" class="lazy"></p> <p><code>webpack1</code>支持<code>CommonJs</code>和<code>AMD</code>模块化系统，优化依赖关系，支持分包，支持多种类型 script、image、file、css/less/sass/stylus、mocha/eslint/jshint 的打包，丰富的插件体系。</p> <p>以上的 3 个库 <code>Grunt/Gulp/browserify</code> 都是偏向于工具，而 <code>webpack</code>将以上功能都集成到一起，相比于工具它的功能大而全。</p> <p><code>webpack</code>的概念更偏向于工程化，但是在当时并没有马上火起来，因为当时的前端开发并没有太复杂，有一些 mvc 框架但都是昙花一现，前端的技术栈在 requireJs/sea.js、grunt/gulp、browserify、webpack 这几个工具之间抉择。</p> <p><code>webpack</code>真正的火起来是在<code>2015/2016</code>，随着<code>ES2015</code>（<code>ES6</code>）发布，不止带来了新语法，也带来了属于前端的模块规范<code>ES module</code>，<code>vue/react/Angular</code>三大框架打得火热，<code>webpack2</code> 发布：支持<code>ES module</code>、<code>babel</code>、<code>typescript</code>，jsx，Angular 2 组件和 vue 组件，<code>webpack</code>搭配<code>react/vue/Angular</code>成为最佳选择，至此前端开发离不开<code>webpack</code>，<code>webpack</code>真正成为前端工程化的核心。</p> <p><code>webpack</code>的其他功能就不在这里赘述。</p> <p><strong>原理</strong></p> <p><code>webpack</code>主要的三个模块就是，后两个也是我们经常配置的：</p> <ul><li>核心流程</li> <li>loader</li> <li>plugins</li></ul> <p><code>webpack</code>依赖于<code>Tapable</code>做事件分发，内部有大量的<code>hooks</code>钩子，在<code>Compiler</code>和<code>compilation</code> 核心流程中通过钩子分发事件，在<code>plugins</code>中注册钩子，实际代码全都由不同的内置 <code>plugins</code> 来执行，而 <code>loader</code> 在中间负责转换代码接受一个源码处理后返回处理结果<code>content string -&gt; result string</code>。</p> <p>因为钩子太多了，<code>webpack</code> 源码看起来十分的绕，简单说一下大致流程：</p> <ol><li>通过命令行和 <code>webpack.config.js</code> 来获取参数</li> <li>创建<code>compiler</code>对象，初始化<code>plugins</code></li> <li>开始编译阶段，<code>addEntry</code>添加入口资源</li> <li><code>addModule</code> 创建模块</li> <li><code>runLoaders</code> 执行 <code>loader</code></li> <li>依赖收集，js 通过<code>acorn</code>解析为 <code>AST</code>，然后查找依赖，并重复 4 步</li> <li>构建完<strong>依赖树</strong>后，进入生成阶段，调用<code>compilation.seal</code></li> <li>经过一系列的<code>optimize</code>优化依赖，生成 <code>chunks</code>，写入文件</li></ol> <p><code>webpack</code>的优点就不用说了，现在说一下 2 个缺点：</p> <ul><li>配置复杂</li> <li>大型项目构建慢</li></ul> <p>配置复杂这一块一直是<code>webpack</code>被吐槽的一点，主要还是过重的插件系统，复杂的插件配置，插件文档也不清晰，更新过快插件没跟上或者文档没跟上等问题。</p> <p>比如现在 <code>webpack</code> 已经到 5 了网上一搜全都是 <code>webpack3</code> 的文章，往往是新增一个功能，按照文档配置完后，诶有报错，网上一顿查，这里拷贝一段，那里拷贝一段，又来几个报错，又经过一顿搞后终于可以运行。</p> <p>后来针对这个问题，衍生出了前端脚手架，<code>react</code>出了<code>create-react-app</code>，<code>vue</code>出了<code>vue-cli</code>，脚手架内置了<code>webpack</code>开发中的常用配置，达到了 0 配置，开发者无需关心 <code>webpack</code> 的复杂配置。</p> <h3 id="rollup"><a href="#rollup" class="header-anchor">#</a> rollup</h3> <p>2015 年，前端的<code>ES module</code>发布后，<code>rollup</code>应声而出。</p> <p><code>rollup</code>编译<code>ES6</code>模块，提出了<code>Tree-shaking</code>，根据<code>ES module</code>静态语法特性，删除未被实际使用的代码，支持导出多种规范语法，并且导出的代码非常简洁，如果看过 <code>vue</code> 的<code>dist</code> 目录代码就知道导出的 <code>vue</code> 代码完全不影响阅读。</p> <p><code>rollup</code>的插件系统支持：<code>babel</code>、<code>CommonJs</code>、<code>terser</code>、<code>typescript</code>等功能。</p> <p>相比于<code>browserify</code>的<code>CommonJs</code>，<code>rollup</code>专注于<code>ES module</code>。 相比于<code>webpack</code>大而全的前端工程化，<code>rollup</code>专注于纯<code>javascript</code>，大多被用作打包<code>tool</code>工具或<code>library</code>库。</p> <p>react、vue 等库都使用<code>rollup</code>打包项目，并且下面说到的<code>vite</code>也依赖<code>rollup</code>用作生产环境打包 js。</p> <h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree-shaking</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./num&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上代码最终打包后 b 的声明就会被删除掉。</p> <p>这依赖<code>ES module</code>的静态语法，在编译阶段就可以确定模块的导入导出有哪些变量。</p> <p><code>CommonJs</code> 因为是基于运行时的模块导入，其导出的是一个整体，并且<code>require(variable)</code>内容可以为变量，所以在<code>ast</code>编译阶段没办法识别为被使用的依赖。</p> <p><code>webpack4</code>中也开始支持<code>tree-shaking</code>，但是因为历史原因，有太多的基于<code>CommonJS</code>代码，需要额外的配置。webpack 的 tree-shaking 依赖 Terser 压缩库，Terser中支持删除被标记为 #<strong>PURE</strong> 注释的代码，所以webpack负责标记，删除是Terser负责</p> <h3 id="parcel"><a href="#parcel" class="header-anchor">#</a> parcel</h3> <p>上面提到过<code>webpack</code>的两个缺点，而<code>parcel</code>的诞生就是为了解决这两个缺点，parcel 主打<strong>极速零配置</strong>。</p> <table><thead><tr><th>打包工具</th> <th>时间</th></tr></thead> <tbody><tr><td>browserify</td> <td>22.98s</td></tr> <tr><td>webpack</td> <td>20.71s</td></tr> <tr><td>parcel</td> <td>9.98s</td></tr> <tr><td>parcel - with cache</td> <td>2.64s</td></tr></tbody></table> <p>以上是 <code>parcel</code> 官方的一个数据，基于一个合理大小的应用，包含 1726 个模块，6.5M 未压缩大小。在一台有 4 个物理核心 CPU 的 2016 MacBook Pro 上构建。</p> <p><code>parcel</code> 使用 <code>worker</code> 进程去启用多核编译，并且使用文件缓存。</p> <p><code>parcel</code> 支持 0 配置，内置了 <code>html、babel、typescript、less、sass、vue</code>等功能，无需配置，并且不同于<code>webpack</code>只能将 js 文件作为入口，在 <code>parcel</code> 中万物皆资源，所以 <code>html</code> 文件 <code>css</code> 文件都可以作为入口来打包。</p> <p>所以不需要<code>webpack</code>的复杂配置，只需要一个<code>parcel index.html</code>命令就可以直接起一个自带热更新的<code>server</code>来开发<code>vue/react</code>项目。</p> <p>parcel 也有它的缺点：</p> <ul><li>0 配置的代价，0 配置是好，但是如果想要配置一些复杂的配置就很麻烦。</li> <li>生态，相比于<code>webpack</code>比较小众，如果遇到错误查找解决方案比较麻烦。</li></ul> <p><strong>原理</strong></p> <ol><li><code>commander</code> 获取命令</li> <li>启动 <code>server</code> 服务，启动 <code>watch</code>监听文件，启动 <code>WebSocket</code> 服务用于 hmr，启动多线程</li> <li>如果是第一次启动，针对入口文件开始编译</li> <li>根据扩展名生成对应<code>asset</code>资源，例如<code>jsAsset</code>、<code>cssAsset</code>、<code>vueAsset</code>，如果<code>parcel</code>识别 <code>less</code> 文件后项目内如果没有 <code>less</code> 库会自动安装</li> <li>读取缓存，如果有缓存跳到第 7 步</li> <li>多线程编译文件，调用 <code>asset</code> 内方法<code>parse -&gt; ast -&gt; 收集依赖 -&gt; transform(转换代码) -&gt; generate(生成代码)</code>，在这个过程中收集到依赖，编译完结果写入缓存</li> <li>编译依赖文件，重复第 4 步开始</li> <li><code>createBundleTree</code> 创建依赖树，替换 hash 等，<code>package</code>打包生成最终代码</li> <li>当<code>watch</code>文件发生变化，重复第 4 步，并将结果 7 通过<code>WebSocket</code>发送到浏览器，进行热更新。</li></ol> <p>一个完整的模块化打包工具就以上功能和流程。</p> <h2 id="基于浏览器-es-模块的构建工具"><a href="#基于浏览器-es-模块的构建工具" class="header-anchor">#</a> 基于浏览器 ES 模块的构建工具</h2> <p><code>browserify</code>、<code>webpack</code>、<code>rollup</code>、<code>parcel</code>这些工具的思想都是递归循环依赖，然后组装成依赖树，优化完依赖树后生成代码。 但是这样做的缺点就是慢，需要遍历完所有依赖，即使 <code>parcel</code> 利用了多核，<code>webpack</code> 也支持多线程，在打包大型项目的时候依然慢可能会用上几分钟，存在性能瓶颈。</p> <p>所以基于浏览器原生 <code>ESM</code> 的运行时打包工具出现：</p> <p><img alt="img" data-src="https://pic3.zhimg.com/80/v2-803da877b93068d98444e989724922e6_720w.jpg" loading="lazy" class="lazy"></p> <p><img alt="img" data-src="https://pic3.zhimg.com/80/v2-43e2fe4b2953798ed56ca7a82819b93a_720w.jpg" loading="lazy" class="lazy"></p> <p>仅打包屏幕中用到的资源，而不用打包整个项目，开发时的体验相比于 <code>bundle</code>类的工具只能用极速来形容。 （实际生产环境打包依然会构建依赖方式打包）</p> <h3 id="snowpack-和-vite"><a href="#snowpack-和-vite" class="header-anchor">#</a> snowpack 和 vite</h3> <p>因为 <code>snowpack</code> 和 <code>vite</code> 比较类似，都是<code>bundleless</code>所以一起拿来说，区别可以看一下 <a href="https://link.zhihu.com/?target=https%3A//cn.vitejs.dev/guide/comparisons.html%23snowpack" target="_blank" rel="noopener noreferrer">vite 和 snowpack 区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这里就不赘述了。</p> <p><code>bundleless</code>类运行时打包工具的启动速度是毫秒级的，因为不需要打包任何内容，只需要起两个<code>server</code>，一个用于页面加载，另一个用于<code>HMR</code>的<code>WebSocket</code>，当浏览器发出原生的<code>ES module</code>请求，<code>server</code>收到请求只需编译当前文件后返回给浏览器不需要管依赖。</p> <p><code>bundleless</code>工具在<strong>生产环境</strong>打包的时候依然是使用<code>bundle</code>的方式一次性全量打包所以依赖，vite 是利用 <code>rollup</code> 打包生产环境的 js 的。</p> <p>原理拿 <code>vite</code> 举例：</p> <p><code>vite</code>在启动服务器后，会预先以所有 html 为入口，使用 <code>esbuild</code> 编译一遍，把所有的 <code>node_modules</code> 下的依赖编译并缓存起来，例如<code>vue</code>缓存为单个文件，element-ui等进行预缓存。</p> <p>当打开在浏览器中输入链接，渲染<code>index.html</code>文件的时候，利用浏览器自带的<code>ES module</code>来请求文件。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>vite 收到一个<code>src/main.js</code>的 <code>http</code> 文件请求，使用<code>esbuild</code>开始编译<code>main.js</code>，这里不进行<code>main.js</code>里面的依赖编译。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App.vue&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>浏览器获取到并编译<code>main.js</code>后，再次发出 2 个请求，一个是 <code>vue</code> 的请求，因为前面已经说了 vue 被预先缓存下来，直接返回缓存给浏览器，另一个是<code>App.vue</code>文件，这个需要<code>@vitejs/plugin-vue</code>来编译，编译完成后返回结果给浏览器（<code>@vitejs/plugin-vue</code>会在脚手架创建模板的时候自动配置）。</p> <p>因为是基于浏览器的<code>ES module</code>，所以编译过程中需要把一些 <code>CommonJs</code>、<code>UMD</code> 的模块都转成 <code>ESM</code>。</p> <p><code>Vite</code> 同时利用 <code>HTTP</code> 头来加速整个页面的重新加载（再次让浏览器为我们做更多事情）：源码模块的请求会根据 <code>304 Not Modified</code> 进行协商缓存，而依赖模块请求则会通过 <code>Cache-Control: max-age=31536000,immutable</code> 进行强缓存，因此一旦被缓存它们将不需要再次请求，即使缓存失效只要服务没有被杀死，编译结果依然保存在程序内存中也会很快返回。</p> <p>上面多次提到了<code>esbuild</code>，<code>esbuild</code>使用 <code>go</code> 语言编写，所以在 <code>i/o</code> 和运算运行速度上比解释性语言 <code>NodeJs</code> 快得多，<code>esbuild</code> 号称速度是 <code>node</code> 写的其他工具的 10~100 倍。</p> <p><img alt="img" data-src="https://pic4.zhimg.com/80/v2-821a6fabd3cbfe00099477446e5c7dbb_720w.jpg" loading="lazy" class="lazy"></p> <p><code>ES module</code> 依赖运行时编译的概念 + <code>esbuild</code> + 缓存 让 <code>vite</code> 的速度远远甩开其他构建工具。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>简单的汇总：</p> <ul><li><p>前端运行时模块化</p></li> <li><ul><li><code>RequireJs</code> AMD 规范</li> <li><code>sea.js</code> CMD 规范</li></ul></li> <li><p>自动化工具</p></li> <li><ul><li><code>Grunt</code> 基于配置</li> <li><code>Gulp</code> 基于代码和文件流</li></ul></li> <li><p>模块化</p></li> <li><ul><li><code>browserify</code> 基于<code>CommonJs</code>规范只负责模块化</li> <li><code>rollup</code> 基于<code>ES module</code>，<code>tree shaking</code>优化代码，支持多种规范导出，可通过插件集成压缩、编译、commonjs 语法 等功能</li></ul></li> <li><p>工程化</p></li> <li><ul><li><code>webpack</code> 大而全的模块化构建工具</li> <li><code>parcel</code> 极速 0 配置的模块化构建工具</li> <li><code>snowpack/vite</code> <code>ESM</code>运行时模块化构建工具</li></ul></li></ul> <p>这 10 年，前端的构建工具随着 <code>nodejs</code> 的逐渐成熟衍生出一系列的工具，除了文中列举的还有一些其他的工具，或者基于这些工具二次封装，在<code>nodejs</code>出现之前前端也不是没有构建工具虽然很少，只能说<code>nodejs</code>的出现让更多人可以参与进来，尤其是前端可以使用本身熟悉的语言参与到开发工具使用工具中，npm 上至今已经有 17 万个包，周下载量 300 亿。</p> <p>在这个过程中也有些模块化历史遗留问题，我们现在还在使用着 UMD 规范库来兼容这 AMD 规范，npm 的包大都是基于<code>CommonJs</code>，不得不兼容<code>ESM</code>和<code>CommonJs</code>。</p> <p><code>webpack</code>统治前端已经 5 年，人们提到开发项目只会想到 <code>webpack</code>，而下一个 5 年会由谁来替代？<code>snowpack/vite</code>吗，当打包速度达到 0 秒后，未来有没有可能出现新一代的构建工具？下一个 10 年前端又会有什么变化？</p> <p>文章来源：https://zhuanlan.zhihu.com/p/398335192</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/6/12 上午9:42:06</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:hbsonglitao@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/songlitao" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2023
    <span>大石头</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script>
      (function(){
        // 通过重写 document.querySelector 方法解决开启 vuepress-plugin-smooth-scroll 定位中文hash报错问题
        document.querySelector2 = document.querySelector;
        document.querySelector = function(selectors){
          return document.querySelector2(decodeURIComponent(selectors));
        };
      })();
    </script>
    <script defer src="https://cdn.staticfile.org/vue/2.6.14/vue.min.js"></script>
    <!-- <script defer src="https://cdn.staticfile.org/element-ui/2.15.9/index.min.js"></script> -->
    <script src="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/app.77b6dd1c.js" defer></script><script src="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/2.1180b6b0.js" defer></script><script src="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/3.3207771c.js" defer></script><script src="https://fastly.jsdelivr.net/gh/songlitao/picgo/resource/blog/assets/js/293.623bd08c.js" defer></script>
  </body>
</html>
